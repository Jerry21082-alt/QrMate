"use client";

import Wrapper from "@/components/Wrapper";
import { pdf, share, ticket, website } from "@/public";
import Image from "next/image";
import Link from "next/link";
import { useState } from "react";
import { useRouter } from "next/navigation";
import { exportContext } from "@/components/useStateContext/StateContext";

const selectQrcode = [
  {
    icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 125" x="0px" y="0px"><path d="M11.41,86.506H88.59A5.916,5.916,0,0,0,94.5,80.6V19.4a5.916,5.916,0,0,0-5.91-5.91H11.41A5.916,5.916,0,0,0,5.5,19.4V80.6A5.916,5.916,0,0,0,11.41,86.506Zm77.18-2H11.41A3.914,3.914,0,0,1,7.5,80.6V25.95h85V80.6A3.914,3.914,0,0,1,88.59,84.506ZM11.41,15.494H88.59A3.914,3.914,0,0,1,92.5,19.4V23.95H7.5V19.4A3.914,3.914,0,0,1,11.41,15.494Z"/><path d="M84.718,22.829a3.107,3.107,0,1,0-3.107-3.107A3.11,3.11,0,0,0,84.718,22.829Zm0-4.214a1.107,1.107,0,1,1-1.107,1.107A1.107,1.107,0,0,1,84.718,18.615Z"/><path d="M76.385,22.829a3.107,3.107,0,1,0-3.107-3.107A3.109,3.109,0,0,0,76.385,22.829Zm0-4.214a1.107,1.107,0,1,1-1.107,1.107A1.107,1.107,0,0,1,76.385,18.615Z"/><path d="M68.052,22.829a3.107,3.107,0,1,0-3.107-3.107A3.109,3.109,0,0,0,68.052,22.829Zm0-4.214a1.107,1.107,0,1,1-1.107,1.107A1.107,1.107,0,0,1,68.052,18.615Z"/><path d="M41.493,63.155a1,1,0,0,0-.039-.191.955.955,0,0,0-.105-.157,1.043,1.043,0,0,0-.108-.16,1.012,1.012,0,0,0-.163-.11.945.945,0,0,0-.154-.1,1.032,1.032,0,0,0-.217-.045.946.946,0,0,0-.168-.035h-.012l-8.477.052a1,1,0,0,0-.7,1.707l1.669,1.669-3.885,3.886a1,1,0,0,0,0,1.414l3.672,3.671a1,1,0,0,0,1.414,0L38.1,70.867l1.669,1.67a1,1,0,0,0,.707.293,1,1,0,0,0,1-.994l.052-8.477v-.012A.9.9,0,0,0,41.493,63.155Zm-2.681,5.591a1,1,0,0,0-1.414,0l-3.885,3.885-2.258-2.257,3.885-3.886a1,1,0,0,0,0-1.414l-.683-.684,5.07-.031L39.5,69.43Z"/><path d="M71.156,55.06A19.138,19.138,0,0,0,52.067,35.933c-.02,0-.038-.005-.058-.005s-.036.005-.054.005a19.145,19.145,0,0,0-18.55,23.7,1,1,0,0,0,1.943-.478,16.937,16.937,0,0,1-.462-3.074h7.3c.168,6.58,1.962,12.176,4.643,15.348a16.872,16.872,0,0,1-1.929-.734,1,1,0,1,0-.833,1.818,18.907,18.907,0,0,0,7.936,1.721A19.152,19.152,0,0,0,71.156,55.1l0-.017C71.159,55.072,71.156,55.067,71.156,55.06ZM67.25,62.921H61.014a35.34,35.34,0,0,0,.815-6.843h7.3A17.023,17.023,0,0,1,67.25,62.921ZM51.009,72.065c-2.187-.641-4.12-3.335-5.37-7.144h5.37Zm2,0V64.921h5.37C57.13,68.73,55.2,71.424,53.009,72.065Zm0-9.144V56.078h6.822a33.178,33.178,0,0,1-.883,6.843ZM36.763,47.231h6.242a35.38,35.38,0,0,0-.816,6.847h-7.3A17.118,17.118,0,0,1,36.763,47.231Zm8.308,0h5.938v6.847H44.188A33.149,33.149,0,0,1,45.071,47.231Zm13.307-2H53.009v-7.14C55.2,38.732,57.128,41.424,58.378,45.231Zm-7.369-7.14v7.14H45.641C46.89,41.424,48.823,38.732,51.009,38.091Zm2,9.14h5.938a33.216,33.216,0,0,1,.884,6.847H53.009Zm8.82,6.847a35.3,35.3,0,0,0-.816-6.847h6.236a17.093,17.093,0,0,1,1.875,6.847Zm4.208-8.847H60.483A18.368,18.368,0,0,0,57.2,38.747,17.162,17.162,0,0,1,66.037,45.231ZM46.82,38.744a18.368,18.368,0,0,0-3.284,6.487H37.975A17.17,17.17,0,0,1,46.82,38.744Zm4.189,17.334v6.843H45.07a33.179,33.179,0,0,1-.882-6.843ZM57.2,71.415a18.341,18.341,0,0,0,3.289-6.494h5.554A17.175,17.175,0,0,1,57.2,71.415Z"/>
</svg>`,
    type: "website",
  },
  {
    icon: `<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-5.0 -10.0 110.0 135.0">
  <g>
   <path d="m43.297 20.375-2.875 0.89062c-1.0938-0.625-2.3281-0.95312-3.5938-0.95312-3.75 0-6.8594 2.875-7.4688 6.6406-1.0469 0.078125-2.6875 0.03125-4.125-0.84375s-2.4219-2.4062-2.9375-4.5938c-0.15625-0.67188-0.73438-1.1562-1.4219-1.2031-0.67188-0.03125-1.3281 0.35938-1.5625 1.0156-1.5625 4.1562-2.5625 13.031 4.7344 16.938 0.76562 0.40625 1.7031 0.125 2.1094-0.64062s0.125-1.7031-0.64062-2.1094c-3.75-2-4.375-5.75-4.1719-8.7188 0.64062 0.8125 1.4062 1.4844 2.2969 2.0156 3.4688 2.0781 7.4062 1.0625 7.5781 1.0156 0.6875-0.1875 1.1562-0.79688 1.1562-1.5156 0-2.6875 2-4.875 4.4531-4.875 0.875 0 1.7188 0.28125 2.4531 0.79688 0.39062 0.28125 0.90625 0.375 1.375 0.23438l0.59375-0.1875-0.34375 0.96875c-0.125 0.35938-0.125 0.75 0.015625 1.1094 0.25 0.60938 0.375 1.2656 0.375 1.9375 0 3.1406-1.7344 9.2344-6.4062 12.172-3.9531 2.5-9.1562 2.25-15.438-0.73438-0.78125-0.375-1.7188-0.046875-2.0781 0.73438-0.375 0.78125-0.03125 1.7188 0.73438 2.0781 4.1875 1.9844 7.7031 2.7188 10.609 2.7188 3.4219 0 6.0156-1.0156 7.8438-2.1719 5.7656-3.6406 7.8594-10.859 7.8594-14.828 0-0.85938-0.125-1.7031-0.39062-2.5156l1.2031-3.3906c0.20312-0.5625 0.0625-1.1719-0.34375-1.6094-0.40625-0.42188-1.0156-0.57812-1.5938-0.40625z"/>
   <path d="m82.75 48.047c4.8125-4.0156 7.875-10.047 7.875-16.797 0-12.062-9.8125-21.875-21.875-21.875-6.75 0-12.781 3.0625-16.797 7.875-4.625-6.8281-12.359-11-20.703-11-13.781 0-25 11.219-25 25 0 7.9375 3.8594 15.438 10.188 20.109-5.3594 4.0938-8.625 10.547-8.625 17.391 0 12.062 9.8125 21.875 21.875 21.875 7.0469 0 13.578-3.3906 17.656-8.9844 4.4844 7.4219 12.609 12.109 21.406 12.109 13.781 0 25-11.219 25-25 0-8.3438-4.1719-16.078-11-20.703zm-20.25-18.359h3.125v-6.25c0-2.5781 2.1094-4.6875 4.6875-4.6875h4.6875c0.85938 0 1.5625 0.70312 1.5625 1.5625s-0.70312 1.5625-1.5625 1.5625h-4.6875c-0.85938 0-1.5625 0.70312-1.5625 1.5625v6.25h4.6875c0.85938 0 1.5625 0.70312 1.5625 1.5625s-0.70312 1.5625-1.5625 1.5625h-4.6875v10.938c0 0.85938-0.70312 1.5625-1.5625 1.5625s-1.5625-0.70312-1.5625-1.5625v-10.938h-3.125c-0.85938 0-1.5625-0.70312-1.5625-1.5625s0.70312-1.5625 1.5625-1.5625zm-26.641 39.297-10.781 6.0156s-0.078125-0.046875-0.078125-0.21875v-12.062c0-0.10938 0.03125-0.17188 0.03125-0.20312l10.828 6s0.078125 0.125 0.078125 0.23438-0.03125 0.20312-0.078125 0.23438zm-4.6094-15.859c-3.9531 0-7.8438-1.0781-11.234-3.1094-6.5625-3.9375-10.641-11.125-10.641-18.766 0-12.062 9.8125-21.875 21.875-21.875 7.7031 0 14.812 4.0625 18.766 10.641-1.9844 3.2969-3.1406 7.125-3.1406 11.234s1.1562 7.9375 3.1406 11.234c-2.1875 3.625-5.3125 6.5312-9.125 8.4062-2.9688 1.4688-6.2969 2.2344-9.6406 2.2344zm13.109-0.59375c3.0156-1.8594 5.5938-4.3438 7.5938-7.2812 0.84375 1.0156 1.7812 1.9531 2.7969 2.7969-2.9844 2.0312-5.5312 4.7188-7.4062 7.8281-0.875-1.2188-1.875-2.3438-2.9844-3.3438zm24.391 38.094c-8.2812 0-15.859-4.7188-19.547-12.094 1.5312-3.0156 2.3594-6.375 2.3594-9.7812s-0.82812-6.7656-2.3594-9.7812c1.8594-3.7031 4.7656-6.8438 8.3281-8.9844 3.2812 1.9844 7.1094 3.1406 11.219 3.1406s7.9375-1.1562 11.234-3.1406c6.5781 3.9531 10.641 11.062 10.641 18.766 0 12.062-9.8125 21.875-21.875 21.875z"/>
   <path d="m75 56.25h-12.5c-3.4531 0-6.25 2.7969-6.25 6.25v12.5c0 3.4531 2.7969 6.25 6.25 6.25h12.5c3.4531 0 6.25-2.7969 6.25-6.25v-12.5c0-3.4531-2.7969-6.25-6.25-6.25zm3.125 18.75c0 1.7188-1.4062 3.125-3.125 3.125h-12.5c-1.7188 0-3.125-1.4062-3.125-3.125v-12.5c0-1.7188 1.4062-3.125 3.125-3.125h12.5c1.7188 0 3.125 1.4062 3.125 3.125z"/>
   <path d="m68.75 62.5c-3.4531 0-6.25 2.7969-6.25 6.25s2.7969 6.25 6.25 6.25 6.25-2.7969 6.25-6.25-2.7969-6.25-6.25-6.25zm0 9.375c-1.7188 0-3.125-1.4062-3.125-3.125s1.4062-3.125 3.125-3.125 3.125 1.4062 3.125 3.125-1.4062 3.125-3.125 3.125z"/>
  </g>
 </svg>`,
    type: "social media",
  },
  {
    icon: `<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-5.0 -10.0 110.0 135.0">
  <path d="m96.914 28.516-4.9727 15.848c-0.32812 1.0547-1.4492 1.6367-2.5 1.3125-0.32031-0.097656-0.59766-0.27344-0.82031-0.49609-0.71875-0.71484-1.6602-1.0742-2.5977-1.0742s-1.8828 0.35938-2.5977 1.0742c-0.71875 0.71875-1.0781 1.6602-1.0781 2.5977 0 0.94531 0.35938 1.8906 1.0781 2.6055 0.77344 0.78125 0.76953 2.0391-0.007812 2.8125l-34.68 34.688-0.070312 0.078126-0.078125 0.070312-8.5977 8.6016c-0.78125 0.78125-2.0469 0.78125-2.8281 0l-33.805-33.805c-0.78125-0.78125-0.78125-2.0469 0-2.8281l43.434-43.43c0.78125-0.78125 2.0469-0.78125 2.8281 0 0.71875 0.71875 1.6562 1.0742 2.5977 1.0742 0.9375 0 1.8828-0.35938 2.5977-1.0781 0.71875-0.71875 1.0742-1.6562 1.0742-2.5938 0-0.94141-0.35938-1.8828-1.0703-2.6016-0.78516-0.77734-0.78516-2.043-0.007812-2.8242 0.26562-0.26562 0.58203-0.4375 0.91797-0.52344l15.859-4.9766c0.73047-0.22656 1.4961-0.011719 2.0078 0.49609l5.2773 5.2773c2.7344-2.5352 5.6836-4.3672 8.332-5.3047 3.3945-1.2031 6.4492-0.99219 8.3555 0.91016 1.9062 1.9062 2.1133 4.9609 0.91016 8.3555-0.9375 2.6445-2.7656 5.5977-5.3047 8.3359l5.2773 5.2773c0.57422 0.57422 0.72656 1.4062 0.46094 2.1172zm-80.637 24.234 30.977 30.977 32.121-32.117c-0.67969-1.1836-1.0234-2.5039-1.0234-3.8242 0-1.9609 0.75391-3.9258 2.25-5.4258 1.4961-1.4961 3.4648-2.2461 5.4258-2.2461 0.98047 0 1.9648 0.1875 2.8906 0.5625l3.8594-12.301-13.812-13.812c-1.2344 1.5195-2.1992 3.0586-2.8555 4.5078 1.1133 0.3125 2.168 0.90625 3.0469 1.7812 1.3594 1.3555 2.0391 3.1445 2.0391 4.9336 0.007813 1.7773-0.67578 3.5625-2.0391 4.9297-1.3516 1.3633-3.1406 2.0391-4.9297 2.0391-1.7852 0.007813-3.5742-0.67188-4.9336-2.0352l-0.12109-0.13281c-1.2812-1.3477-1.9219-3.0781-1.9219-4.8008 0-1.7773 0.68359-3.5625 2.043-4.9258 0.72266-0.73047 1.5664-1.2617 2.4688-1.6016l0.14062-0.41797c0.80078-2.2578 2.25-4.7383 4.2344-7.1172l-4.4961-4.4961-12.305 3.8594c0.37891 0.92578 0.56641 1.9062 0.56641 2.8906 0 1.9609-0.75 3.9258-2.2422 5.4219-1.4961 1.4961-3.4648 2.25-5.4258 2.25-1.3203 0-2.6445-0.33984-3.8242-1.0195l-32.117 32.117zm28.145 33.805-30.977-30.977-5.8477 5.8477 30.977 30.977zm37.277-74.906 6.6523 6.6484c2.1094-2.2891 3.6094-4.7031 4.3633-6.8359 0.67969-1.9258 0.74219-3.4805 0.027344-4.1953-0.71875-0.71875-2.2734-0.65625-4.1992 0.023437-2.1328 0.75781-4.5469 2.2578-6.8359 4.3594zm-6.0703 12.723c0.78125 0.78125 0.78125 2.0469 0 2.8281s-2.0469 0.78125-2.8281 0c-0.67188-0.67188-1.1328-1.4883-1.3945-2.4102-0.11328 0.32031-0.17188 0.66016-0.17188 1 0 0.73047 0.26172 1.4609 0.78125 2.0234l0.085937 0.085938c0.58203 0.58203 1.3438 0.87109 2.1055 0.87109 0.75781 0.007813 1.5195-0.28516 2.1055-0.87109 0.58203-0.57422 0.87109-1.3398 0.875-2.1055 0.003906-0.75781-0.28906-1.5195-0.87891-2.1055-0.34375-0.34766-0.75781-0.58984-1.1992-0.73047 0.023437 0.61328 0.1875 1.1016 0.51172 1.4219z"/>
 </svg>`,
    type: "coupon",
  },
  {
    icon: `<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-5.0 -10.0 110.0 135.0">
  <path d="m68.418 30.77c-5.957-0.003906-10.781-4.8359-10.781-10.789v-12.605h-30.355c-4.6016 0-8.332 3.7305-8.332 8.332v68.605c0 2.2109 0.875 4.3281 2.4414 5.8906 1.5625 1.5664 3.6797 2.4414 5.8906 2.4414h45.438c2.2109 0 4.3281-0.875 5.8906-2.4414 1.5664-1.5625 2.4414-3.6797 2.4414-5.8906v-53.543zm-22.48 8.5312c0-1.1484 0.93359-2.082 2.082-2.082h1.6992c2.418-0.082031 4.7617 0.82031 6.5 2.5s2.7227 3.9922 2.7227 6.4102c0 2.418-0.98438 4.7344-2.7227 6.4141-1.7383 1.6797-4.082 2.582-6.5 2.5h-1.6992c-1.1484 0-2.082-0.93359-2.082-2.0859zm-14.688 7.8438v-7.8438c0-1.1484 0.93359-2.082 2.082-2.082h3.918c1.6367-0.066406 3.2305 0.53516 4.4102 1.668 1.1836 1.1328 1.8516 2.6992 1.8516 4.3359 0 1.6406-0.66797 3.207-1.8516 4.3398-1.1797 1.1328-2.7734 1.7344-4.4102 1.668h-1.832v3.7305-0.003907c0 1.1523-0.93359 2.0859-2.0859 2.0859-1.1484 0-2.082-0.93359-2.082-2.0859zm1.043 14.094h5.5508c1.1523 0 2.082 0.93359 2.082 2.0859 0 1.1484-0.92969 2.082-2.082 2.082h-5.5508c-1.1523 0-2.0859-0.93359-2.0859-2.082 0-1.1523 0.93359-2.0859 2.0859-2.0859zm24.07 20.898h-24.07c-1.1523 0-2.0859-0.93359-2.0859-2.0859 0-1.1484 0.93359-2.082 2.0859-2.082h24.07c1.1523 0 2.0859 0.93359 2.0859 2.082 0 1.1523-0.93359 2.0859-2.0859 2.0859zm11.355 0h-4.0625c-1.1523 0-2.082-0.93359-2.082-2.0859 0-1.1484 0.92969-2.082 2.082-2.082h4.0508c1.1523 0 2.0859 0.93359 2.0859 2.082 0 1.1523-0.93359 2.0859-2.0859 2.0859zm0-8.332-35.426-0.003907c-1.1523 0-2.0859-0.92969-2.0859-2.082s0.93359-2.082 2.0859-2.082h35.414c1.1523 0 2.0859 0.92969 2.0859 2.082s-0.93359 2.082-2.0859 2.082zm0-8.332-22.594-0.003906c-1.1523 0-2.082-0.93359-2.082-2.082 0-1.1523 0.92969-2.0859 2.082-2.0859h22.582c1.1523 0 2.0859 0.93359 2.0859 2.0859 0 1.1484-0.93359 2.082-2.0859 2.082zm1.043-21.355v-0.003907c1.1484 0 2.082 0.93359 2.082 2.0859 0 1.1484-0.93359 2.082-2.082 2.082h-3.6172v4.7383c0 1.1523-0.92969 2.0859-2.082 2.0859s-2.082-0.93359-2.082-2.0859v-13.719c0-1.1484 0.92969-2.082 2.082-2.082h5.6875c1.1523 0 2.082 0.93359 2.082 2.082 0 1.1523-0.92969 2.0859-2.082 2.0859h-3.6055v2.668zm-6.9609-24.137v-11.75l18.02 18.375h-11.402c-3.6562-0.007813-6.6172-2.9727-6.6172-6.625zm-11.695 30.883v-9.4688c2.4648 0.20312 4.3633 2.2617 4.3633 4.7344 0 2.4766-1.8984 4.5352-4.3633 4.7344zm-14.688-5.8008v-3.6758h1.832c0.51172-0.039063 1.0156 0.13672 1.3906 0.48438 0.37891 0.35156 0.58984 0.83984 0.58984 1.3516 0 0.51562-0.21094 1.0039-0.58984 1.3516-0.375 0.35156-0.87891 0.52734-1.3906 0.48828z"/>
 </svg>`,
    type: "PDF",
  },
];

export default function CreatePage() {
  const [selectFormat, setSelectFormat] = useState(0);
  const [searchTypes, setSearchTypes] = useState("");
  const { regenerateQrcode, type, setType } = exportContext();

  const mappedSelected = selectQrcode.filter((item) =>
    item.type.toLocaleLowerCase().includes(searchTypes.toLocaleLowerCase())
  );

  const handleSelectFormat = (id, type) => {
    setSelectFormat(id);
    setType(type);
  };

  return (
    <Wrapper>
      <h1 className="text-center text-xl font-semibold text-white mt-14">
        Create QRcode
      </h1>

      <div className="w-full flex justify-center">
        <div className="w-full md:w-3/4 flex items-center justify-between mt-8 space-x-3 bg-lightCulture p-2 rounded-md border border-culture">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            version="1.1"
            viewBox="-5.0 -10.0 110.0 135.0"
            width={35}
            fill="#fff"
          >
            <g>
              <path d="m47.398 78.398c-8.3008 0-16.102-3.1992-21.898-9.1016-5.8984-5.8008-9.1016-13.602-9.1016-21.898 0-8.3008 3.1992-16.102 9.1016-21.898 5.8984-5.8008 13.602-9.1016 21.898-9.1016 8.3008 0 16.102 3.1992 21.898 9.1016 5.8984 5.8984 9.1016 13.602 9.1016 21.898 0 8.3008-3.1992 16.102-9.1016 21.898-5.7969 5.9023-13.598 9.1016-21.898 9.1016zm0-56.797c-6.8984 0-13.398 2.6992-18.301 7.6016-4.8984 4.8984-7.6016 11.398-7.6016 18.301 0 6.8984 2.6992 13.398 7.6016 18.301 4.8984 4.8984 11.398 7.6016 18.301 7.6016 6.8984 0 13.398-2.6992 18.301-7.6016 4.8984-4.8984 7.6016-11.398 7.6016-18.301s-2.6992-13.504-7.5-18.402c-4.9023-4.8008-11.402-7.5-18.402-7.5z" />
              <path d="m65.746 69.336 3.6055-3.6055 14.141 14.141-3.6055 3.6055z" />
            </g>
          </svg>{" "}
          <input
            placeholder="Search QR code type"
            value={searchTypes}
            onChange={(ev) => setSearchTypes(ev.target.value)}
            className="w-full bg-transparent outline-none border-none text-white"
          />
        </div>
      </div>

      <h2 className="text-center text-lg mt-5 text-white">
        Select your QR code type
      </h2>

      <div className="flex justify-center items-center flex-wrap mt-8 w-full">
        {mappedSelected.map((select, i) => (
          <div
            onClick={() => handleSelectFormat(i, select.type)}
            key={i}
            className={`${
              selectFormat === i ? "bg-red" : "bg-grey"
            } w-36 md:w-1/3 rounded-md flex flex-col items-center justify-center py-4 m-2 border`}
          >
            <div className="w-8 h-8">
              <div dangerouslySetInnerHTML={{ __html: select.icon }} />
            </div>
            <p
              className={`${
                selectFormat === i ? "text-white" : "text-black"
              } mt-4`}
            >
              {select.type}
            </p>
          </div>
        ))}
      </div>

      <div className="w-full mt-12 md:mt-16 flex justify-center">
        <Link
          href={{
            query: { type: type },
            pathname: `/pages/previewQrcode/${type}`,
          }}
          className="rounded-md bg-red p-4 flex justify-center items items-center w-full md:w-3/4 text-white"
        >
          Next
        </Link>
      </div>
    </Wrapper>
  );
}
